<section class="container py-4">
    <h4>{{ isEdit ? 'Edit Product' : 'Add Product' }}</h4>

    <form [formGroup]="productForm" (ngSubmit)="submit()" class="mt-3" enctype="multipart/form-data">

        <div class="row">
            <div class="col-md-6 mb-3">
                <label>Name</label>
                <input formControlName="name" class="form-control">
                <div class="text-danger" *ngIf="productForm.get('name')?.invalid && productForm.get('name')?.touched">
                    Name is required
                </div>
            </div>

            <div class="col-md-6 mb-3">
                <label>Price</label>
                <input type="number" formControlName="price" class="form-control">
                <div class="text-danger" *ngIf="productForm.get('price')?.invalid && productForm.get('price')?.touched">
                    Price is required and must be greater than 0
                </div>
            </div>

            <div class="col-md-6 mb-3">
                <label>Stock</label>
                <input type="number" formControlName="stock" class="form-control">
            </div>

            <div class="col-md-6 mb-3">
                <label>Category</label>
                <input type="number" formControlName="categoryId" class="form-control">
            </div>

            <div class="col-12 mb-3">
                <label>Description</label>
                <textarea formControlName="description" class="form-control"></textarea>
            </div>

            <!-- Image Upload -->
            <div class="col-12 mb-3">
                <label>Upload Images</label>
                <input type="file" (change)="onImageSelected($event)" multiple accept=".png,.jpg,.jpeg"
                    class="form-control">
                <div class="text-danger" *ngIf="imageError">{{ imageError }}</div>

                <!-- Preview Selected Images -->
                <div class="mt-2 d-flex flex-wrap gap-2">
                    <img *ngFor="let img of imagePreviews" [src]="img" width="100" height="100" class="rounded border">
                </div>
            </div>
        </div>

        <button class="btn btn-success" type="submit" [disabled]="productForm.invalid || imageError">
            {{ isEdit ? 'Update' : 'Create' }}
        </button>

        <button routerLink="/products" class="btn btn-secondary ms-2">
            Cancel
        </button>

    </form>
</section>